import datetime


def _get_duration_components(duration):
    days = duration.days
    seconds = duration.seconds
    microseconds = duration.microseconds

    minutes = seconds // 60
    seconds = seconds % 60

    hours = minutes // 60
    minutes = minutes % 60

    return days, hours, minutes, seconds, microseconds


def duration_string(duration):
    """Version of str(timedelta) which is not English specific."""
    days, hours, minutes, seconds, microseconds = _get_duration_components(duration)

    string = '***REMOVED***:02d***REMOVED***:***REMOVED***:02d***REMOVED***:***REMOVED***:02d***REMOVED***'.format(hours, minutes, seconds)
    if days:
        string = '***REMOVED******REMOVED*** '.format(days) + string
    if microseconds:
        string += '.***REMOVED***:06d***REMOVED***'.format(microseconds)

    return string


def duration_iso_string(duration):
    if duration < datetime.timedelta(0):
        sign = '-'
        duration *= -1
    else:
        sign = ''

    days, hours, minutes, seconds, microseconds = _get_duration_components(duration)
    ms = '.***REMOVED***:06d***REMOVED***'.format(microseconds) if microseconds else ""
    return '***REMOVED******REMOVED***P***REMOVED******REMOVED***DT***REMOVED***:02d***REMOVED***H***REMOVED***:02d***REMOVED***M***REMOVED***:02d***REMOVED******REMOVED******REMOVED***S'.format(sign, days, hours, minutes, seconds, ms)
